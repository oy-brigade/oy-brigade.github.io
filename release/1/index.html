<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>Right → Right 1 DL ページ - OY旅団</title>

    <script src="/vendor/jssha/sha256.js"></script>
    <script src="/vendor/crypto-js/crypto-js.js"></script>
  </head>
  <body>
    <h1>Right → Right DL ページ</h1>
    <p>
      購入された DL カードに記載されているパスワードを、以下のフォームに入力してください。
    </p>

    <input id="form_password" type="text" value="" />
    <button id="submit_password">Submit</button>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('submit_password').addEventListener('click', function() {
          var password = document.getElementById('form_password').value
          var hash = 'OTY3MGE2NTMyOGI1NTU4MWZlOTVhYTEzOWZlZDQ1NzI1OThiZjI4YzE0NjZkNDgyNWRlYWUyMjFhYzllOWJiNg=='
          var shaObj = new jsSHA('SHA-256', 'TEXT')
          shaObj.update(password)
          if (btoa(shaObj.getHash('HEX')) != hash) {
            location.reload()
          } else {
            var enc = 'U2FsdGVkX18fqQv0FvbuCr6ovaQ6W6rPycc2Xt/OacurIflkCZ6bUUrDvXw58ymBFKNGwedCckbGlhZHz+o8vpfJ7ghx4RBgU/VRq6ntQZtV6x/cCtwulNSMX8oFkM3g'
            var path = CryptoJS.AES.decrypt(enc, password).toString(CryptoJS.enc.Utf8)
            location.href = path
          }
        })
      })
    </script>
    <style>
      body {
        color: #444;
        font-family: sans-serif;
        margin: 24px;
      }

      h1 {
        margin: 64px auto 24px;
      }
    </style>
  </body>
</html>
